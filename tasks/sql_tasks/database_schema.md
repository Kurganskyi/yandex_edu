# Описание базы данных и ER-диаграмма для теоретической части Базового SQL

## actor

Содержит данные об актёрах и актрисах.

Таблица включает такие поля:

- `actor_id` (первичный ключ) — идентификатор актёра или актрисы;
- `first_name` — имя актёра или актрисы;
- `last_name` — фамилия актёра или актрисы;
- `last_update` — дата последнего обновления данных об актёре или актрисе.

---

## album

Содержит информацию об альбомах.

Таблица включает такие поля:

- `album_id` (первичный ключ) — идентификатор альбома;
- `title` — название альбома;
- `artist_id` (внешний ключ, ссылается на таблицу `artist`) — идентификатор исполнителя.

---

## artist

Содержит данные об исполнителях.

Таблица состоит из полей:

- `artist_id` (первичный ключ) — идентификатор исполнителя;
- `name` — имя исполнителя.

---

## category

Содержит информацию о категориях фильмов.

Таблица состоит из полей:

- `category_id` (первичный ключ) — идентификатор категории;
- `name` — название категории, например:
  - Comedy - комедия;
  - Sci-Fi - научная фантастика.
- `last_update` — дата последнего обновления данных о категории.

---

## client (customer)

Содержит данные о покупателях.

Таблица включает поля:

- `customer_id` (первичный ключ) — идентификатор покупателя;
- `first_name` — имя покупателя;
- `last_name` — фамилия покупателя;
- `company` — место работы;
- `address` — адрес покупателя;
- `city` — город проживания;
- `state` — штат или регион;
- `country` — страна;
- `postal_code` — почтовый индекс;
- `phone` — телефон;
- `fax` — факс;
- `email` — электронная почта;
- `support_rep_id` (внешний ключ, отсылает к таблице `staff`) — идентификатор сотрудника поддержки, который обрабатывал запрос покупателя.

---

## film_actor

Содержит информацию о том, в каких фильмах играли актёры и актрисы из таблицы `actor`.

Таблица включает поля:

- Составной первичный ключ:
  - `actor_id` (отсылает к таблице `actor`) — идентификатор актёра или актрисы;
  - `film_id` (отсылает к таблице `movie`) — идентификатор фильма;
- `last_update` — дата последнего обновления данных о фильмах.

---

## film_category

Содержит информацию о категориях фильмов из таблицы `movie`.

В таблицу входят поля:

- `film_id` (первичный ключ, отсылает к таблице `movie`) — идентификатор фильма;
- `category_id` (внешний ключ, отсылает к таблице `category`) — идентификатор категории;
- `last_update` — дата последнего обновления данных о фильмах и категориях.

---

## genre

Содержит информацию о жанрах музыки и кино.

В таблицу входят поля:

- `genre_id` (первичный ключ) — идентификатор жанра;
- `name` — название жанра, например:
  - Blues - блюз;
  - Pop - поп-музыка.

---

## invoice

Содержит данные о заказах и выставленных счетах.

Таблица включает поля:

- `invoice_id` (первичный ключ) — идентификатор счёта;
- `customer_id` (внешний ключ, отсылает к таблице `client`) — идентификатор покупателя;
- `invoice_date` — дата выставления счёта;
- `billing_address` — адрес выставления счёта;
- `billing_city` — город выставления счёта;
- `billing_state` — штат или регион выставления счёта;
- `billing_country` — страна выставления счёта;
- `billing_postal_code` — почтовый индекс адреса выставления счёта;
- `total` — стоимость заказа в долларах.

---

## invoice_line

Содержит информацию о том, какие музыкальные треки входят в заказ.

Таблица состоит из полей:

- `invoice_line_id` (первичный ключ) — идентификатор строки;
- `invoice_id` (внешний ключ, отсылает к таблице `invoice`) — идентификатор заказа;
- `track_id` (внешний ключ, отсылает к таблице `track`) — идентификатор трека;
- `unit_price` — цена трека в долларах;
- `quantity` — количество таких треков в заказе.

---

## media_type

Содержит информацию о форматах видео и аудио.

Таблица включает поля:

- `media_type_id` (первичный ключ) — идентификатор формата;
- `name` — название формата, например:
  - AAC audio file - аудиофайл в формате AAC;
  - Protected MPEG-4 video file - защищённый формат MPEG-4 для видео.

---

## movie (film)

Содержит информацию о фильмах.

Таблица состоит из полей:

- `film_id` (первичный ключ) — идентификатор фильма;
- `title` — название фильма;
- `description` — описание фильма;
- `release_year` — год выхода;
- `language_id` — идентификатор языка фильма;
- `rental_duration` — срок аренды в днях;
- `rental_rate` — цена аренды в долларах;
- `length` — продолжительность фильма в минутах;
- `replacement_cost` — стоимость замены;
- `rating` — возрастной рейтинг, например:
  - PG — детям рекомендуется смотреть такой фильм с родителями;
  - PG-13 — детям до 13 лет смотреть такой фильм нежелательно.
- `last_update` — дата последнего обновления данных о фильме в таблице;
- `special_features` — особые характеристики;
- `fulltext` — техническое поле для индексации.

---

## playlist

Содержит информацию о плейлистах.

Таблица включает поля:

- `playlist_id` (первичный ключ) — идентификатор плейлиста;
- `name` — название плейлиста.

---

## playlist_track

Содержит информацию о том, какие треки входят в плейлисты.

В таблицу входят поля:

- `playlist_id` (первичный ключ, отсылает к таблице `playlist`) — идентификатор плейлиста;
- `track_id` (внешний ключ, отсылает к таблице `track`) — идентификатор трека.

---

## staff

Содержит данные о сотрудниках.

В таблицу входят поля:

- `employee_id` (первичный ключ) — идентификатор сотрудника;
- `first_name` — имя сотрудника;
- `last_name` — фамилия сотрудника;
- `title` — должность сотрудника;
- `reports_to` (внешний ключ, отсылает к другой записи таблицы `staff`) — идентификатор менеджера сотрудника;
- `birth_date` — дата рождения сотрудника;
- `hire_date` — дата, когда сотрудника приняли на работу;
- `address` — адрес сотрудника;
- `city` — город проживания сотрудника;
- `state` — штат или регион проживания сотрудника;
- `country` — страна проживания сотрудника;
- `postal_code` — почтовый индекс;
- `phone` — телефон;
- `fax` — факс;
- `email` — электронная почта.

---

## track

Содержит данные о музыкальных треках.

Таблица включает поля:

- `track_id` (первичный ключ) — идентификатор трека;
- `name` — название трека;
- `album_id` (внешний ключ, отсылает к таблице `album`) — идентификатор альбома;
- `media_type_id` (внешний ключ, отсылает к таблице `media_type`) — идентификатор аудиоформата;
- `genre_id` (внешний ключ, отсылает к таблице `genre`) — идентификатор жанра трека;
- `composer` — автор трека;
- `milliseconds` — длительность трека в миллисекундах;
- `bytes` — размер трека в байтах;
- `unit_price` — стоимость трека в долларах.

---

## Связи между таблицами

### Музыкальная часть базы данных:

- `artist` ← `album` (один ко многим)
- `album` ← `track` (один ко многим)
- `genre` ← `track` (один ко многим)
- `media_type` ← `track` (один ко многим)
- `track` ← `playlist_track` (многие ко многим через промежуточную таблицу)
- `playlist` ← `playlist_track` (один ко многим)
- `client` ← `invoice` (один ко многим)
- `invoice` ← `invoice_line` (один ко многим)
- `track` ← `invoice_line` (один ко многим)
- `staff` ← `client` (один ко многим, через `support_rep_id`)

### Кино часть базы данных:

- `actor` ← `film_actor` → `movie` (многие ко многим)
- `movie` ← `film_category` → `category` (многие ко многим)

### Иерархическая структура:

- `staff` ← `staff` (самосвязь через `reports_to`)

---

*Источник: https://code.s3.yandex.net/SQL%20for%20data%20and%20analytics/ER/basic_sql.pdf*

