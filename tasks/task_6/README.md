# Телеграм-бот для управления таймерами

Простой и функциональный телеграм-бот для установки и управления таймерами, созданный с использованием библиотеки aiogram.

## Функциональность

### Основные команды

- `/start` - приветствие и список доступных команд
- `/help` - подробная справка по использованию
- `/timer <время>` - установить таймер
- `/cancel` - отменить активный таймер

### Поддерживаемые форматы времени

- `s` - секунды (1s - 3600s)
- `m` - минуты (1m - 1440m) 
- `h` - часы (1h - 24h)

### Примеры использования

```
/timer 10m    # Таймер на 10 минут
/timer 30s    # Таймер на 30 секунд
/timer 2h     # Таймер на 2 часа
/cancel       # Отменить активный таймер
```

## Установка и запуск

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Получение токена бота

1. Найдите [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

### 3. Настройка бота

#### Вариант 1: Через переменные окружения (рекомендуется)

Создайте файл `.env` в папке с ботом:

```bash
cp env_example.txt .env
```

Отредактируйте `.env` и укажите ваш токен:

```env
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
LOG_LEVEL=INFO
```

#### Вариант 2: Прямое редактирование

Откройте файл `bot.py` и замените `YOUR_BOT_TOKEN_HERE` на ваш токен:

```python
BOT_TOKEN = "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
```

### 4. Запуск

#### Рекомендуемый способ (с поддержкой .env):

```bash
python run.py
```

#### Альтернативный способ:

```bash
python bot.py
```

## Особенности

### Ограничения
- Один активный таймер на пользователя
- Таймеры хранятся в памяти (сбрасываются при перезапуске)
- Максимальное время: 24 часа

### Обработка ошибок
- Валидация формата времени
- Проверка диапазонов значений
- Обработка некорректных команд
- Логирование всех действий

### Архитектура
- Асинхронная работа с использованием asyncio
- Класс TimerManager для управления таймерами
- Централизованная обработка ошибок
- Подробное логирование

## Структура проекта

```
task_6/
├── bot.py              # Основной код бота
├── run.py              # Скрипт запуска с поддержкой .env
├── config.py           # Конфигурация и сообщения
├── requirements.txt    # Зависимости
├── env_example.txt     # Пример файла с переменными окружения
├── README.md          # Документация
└── docs/
    └── task_description.md  # Описание задачи
```

## Логирование

Бот ведет подробные логи всех операций:
- Запуск и остановка таймеров
- Ошибки и исключения
- Команды пользователей

Логи выводятся в консоль в формате:
```
2024-01-01 12:00:00 - bot - INFO - Таймер запущен для пользователя 123456 на 600 секунд
```

## Безопасность

- Валидация всех пользовательских вводов
- Ограничения на максимальное время таймера
- Обработка исключений для предотвращения сбоев
- Логирование для мониторинга

## Разработка

Код написан с соблюдением принципов:
- Читаемость и понятность
- Обработка ошибок
- Логирование
- Типизация
- Документирование

## Поддержка

При возникновении проблем:
1. Проверьте правильность токена бота
2. Убедитесь, что установлены все зависимости
3. Проверьте логи на наличие ошибок
4. Убедитесь, что бот имеет права на отправку сообщений
