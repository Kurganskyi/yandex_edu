# –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É –∫–∏–Ω–æ–∫—Ä–∏—Ç–∏–∫–æ–≤

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É –∫–∏–Ω–æ–∫—Ä–∏—Ç–∏–∫–æ–≤ –≤ —É–±—ã–≤–∞—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ.

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant W as üåê Web Server API
    participant F as üé¨ Films Server API
    participant S as üì∫ Series Server API
    participant DB as üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

    Note over U,DB: –ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ criticsRating

    U->>+W: GET /content/list?type=film&sortBy=criticsRating&sortOrder=desc
    
    Note over W: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
    
    W->>+F: GET /films/list?includeCriticsRating=true
    F->>+DB: SELECT * FROM films WHERE type='film'
    DB-->>-F: –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ —Å criticsRating
    F-->>-W: –§–∏–ª—å–º—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∫–∏–Ω–æ–∫—Ä–∏—Ç–∏–∫–æ–≤
    
    W->>+S: GET /series/list?includeCriticsRating=true
    S->>+DB: SELECT * FROM series WHERE type='series'
    DB-->>-S: –°–ø–∏—Å–æ–∫ —Å–µ—Ä–∏–∞–ª–æ–≤ —Å criticsRating
    S-->>-W: –°–µ—Ä–∏–∞–ª—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∫–∏–Ω–æ–∫—Ä–∏—Ç–∏–∫–æ–≤
    
    Note over W: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    
    W->>W: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã
    W->>W: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –≥—Ä—É–ø–ø—ã:<br/>- –° criticsRating<br/>- –ë–µ–∑ criticsRating
    W->>W: –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É —Å criticsRating –ø–æ —É–±—ã–≤–∞–Ω–∏—é
    W->>W: –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É –±–µ–∑ criticsRating –≤ –∫–æ–Ω–µ—Ü
    
    Note over W: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
    
    W-->>-U: –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞<br/>—Å criticsRating

    Note over U,DB: –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
```

## üîÑ –î–µ—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

```mermaid
sequenceDiagram
    participant W as üåê Web Server
    participant L as üß† –õ–æ–≥–∏–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    participant R as üìã –†–µ–∑—É–ª—å—Ç–∞—Ç

    Note over W,R: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

    W->>+L: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç Films –∏ Series API
    
    L->>L: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫
    
    L->>L: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã:
    Note right of L: –ì—Ä—É–ø–ø–∞ 1: —ç–ª–µ–º–µ–Ω—Ç—ã —Å criticsRating<br/>–ì—Ä—É–ø–ø–∞ 2: —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ criticsRating
    
    L->>L: –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ì—Ä—É–ø–ø—É 1 –ø–æ criticsRating DESC
    Note right of L: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º –±—ã—Å—Ç—Ä–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    
    L->>L: –î–æ–±–∞–≤–∏—Ç—å –ì—Ä—É–ø–ø—É 2 –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞
    Note right of L: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫
    
    L->>L: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (film/series)
    
    L-->>-W: –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
    
    W->>+R: –§–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å JSON –æ—Ç–≤–µ—Ç
    R-->>-W: –ì–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## üìã –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### –ó–∞–ø—Ä–æ—Å
```http
GET /content/list?type=film&sortBy=criticsRating&sortOrder=desc
```

### –û—Ç–≤–µ—Ç
```json
{
  "content": [
    {
      "id": 104,
      "type": "film",
      "title": "–†–µ–±—É—Å –ê—Ç–ª–∞–Ω—Ç–∏–¥—ã",
      "rating": 6.5,
      "criticsRating": 8.2,
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...",
      "year": 2023
    },
    {
      "id": 105,
      "type": "film", 
      "title": "–î—Ä—É–≥–æ–π —Ñ–∏–ª—å–º",
      "rating": 7.1,
      "criticsRating": 7.8,
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ...",
      "year": 2023
    },
    {
      "id": 106,
      "type": "film",
      "title": "–§–∏–ª—å–º –±–µ–∑ —Ä–µ–π—Ç–∏–Ω–≥–∞",
      "rating": 5.5,
      "criticsRating": null,
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ...",
      "year": 2022
    }
  ],
  "total": 3,
  "sortedBy": "criticsRating",
  "sortOrder": "desc"
}
```

## ‚ö° –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```mermaid
sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant W as üåê Web Server API
    participant F as üé¨ Films Server API
    participant S as üì∫ Series Server API

    Note over U,S: –°—Ü–µ–Ω–∞—Ä–∏–π —Å –æ—à–∏–±–∫–æ–π

    U->>+W: GET /content/list?type=film&sortBy=criticsRating&sortOrder=desc
    
    W->>+F: GET /films/list?includeCriticsRating=true
    F-->>-W: ‚ùå –û—à–∏–±–∫–∞ 500: –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
    
    W->>+S: GET /series/list?includeCriticsRating=true
    S-->>-W: ‚úÖ –°–µ—Ä–∏–∞–ª—ã –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
    
    Note over W: –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–π –æ—à–∏–±–∫–∏
    
    W->>W: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    W->>W: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∫ –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–∞–Ω–Ω—ã–º
    W->>W: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –≤ –æ—Ç–≤–µ—Ç
    
    W-->>-U: –ß–∞—Å—Ç–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç + –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- Films –∏ Series API –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –£–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ null –∑–Ω–∞—á–µ–Ω–∏–π**
- –≠–ª–µ–º–µ–Ω—Ç—ã —Å `criticsRating` —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —É–±—ã–≤–∞–Ω–∏—é
- –≠–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ `criticsRating` –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –≤–µ—Å—å –∑–∞–ø—Ä–æ—Å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏ Web Server
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

## üìä –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------------|----------|
| –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ | ~1ms | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| –ó–∞–ø—Ä–æ—Å –∫ Films API | ~50ms | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ñ–∏–ª—å–º–∞—Ö |
| –ó–∞–ø—Ä–æ—Å –∫ Series API | ~50ms | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Ä–∏–∞–ª–∞—Ö |
| –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö | ~5ms | –ê–ª–≥–æ—Ä–∏—Ç–º –±—ã—Å—Ç—Ä–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ |
| –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ | ~2ms | –°–æ–∑–¥–∞–Ω–∏–µ JSON |
| **–û–±—â–µ–µ –≤—Ä–µ–º—è** | **~108ms** | **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é** |

---

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π