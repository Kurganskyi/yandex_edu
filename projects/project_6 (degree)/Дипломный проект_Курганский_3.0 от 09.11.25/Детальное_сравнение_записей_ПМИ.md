# Детальное сравнение записей в таблицах методики испытаний

## Сопоставление функций

| Пример (TR-X) | Созданный документ (US-XXX) | Функция |
| --- | --- | --- |
| TR-1 | US-001 | Регистрация |
| TR-2 | US-003 | Вход в приложение |
| TR-3 | US-004 | Восстановление пароля |
| TR-4 | US-010 | Добавление устройства по QR |
| TR-4.4 | US-011 | Добавление устройства вручную |
| TR-4.5 | US-014 | Удаление устройства |
| TR-5 | US-007 | Добавление комнаты |
| TR-5.1 | US-008 | Изменение комнаты |
| TR-5.2 | US-009 | Удаление комнаты |
| TR-5.3 | US-013 | Добавить устройство в комнату |
| TR-5.4 | US-044 | Удалить устройство из комнаты |
| TR-5.5 | US-017 | Массовое управление устройствами |
| TR-5.7 | US-016 | Энергосберегающий режим |
| TR-6 | US-018 | Создание сценария |
| TR-6.2 | US-021 | Удаление сценария |
| TR-6.3 | US-019 | Запуск сценария |
| TR-7.2 | US-005 | Изменение email |
| TR-7.3 | US-006 | Выход из приложения |

---

## Детальное сравнение записей

### 1. РЕГИСТРАЦИЯ

#### TR-1 vs US-001: Регистрация нового пользователя

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Пользователь регистрируется впервые
```

**Созданный:**
```
Пользователь впервые открыл приложение
```

**Различие:** Пример более общий, созданный более конкретный (уточняет, что приложение открыто).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. На экране входа нажать «Зарегистрироваться».
2. Указать валидные значения в полях «Имя» и «Электронная почта».
3. Ввести и повторить пароль (соответствует требованиям).
4. Нажать «Создать аккаунт».
```

**Созданный:**
```
1. Открыть экран регистрации (нажать "Зарегистрироваться" на экране входа).
2. Заполнить поле "Имя" валидным значением (например, "Михаил").
3. Заполнить поле "Email" валидным email (например, "mikhail@email.com").
4. Заполнить поле "Пароль" паролем, соответствующим требованиям (8-16 символов, строчные и прописные буквы, например "MyPass123").
5. Заполнить поле "Повторите пароль" тем же паролем.
6. Нажать кнопку "Создать аккаунт".
```

**Различия:**
- Созданный документ более детальный (6 шагов vs 4)
- Созданный содержит конкретные примеры значений ("Михаил", "mikhail@email.com", "MyPass123")
- Созданный явно указывает требования к паролю в шаге
- Созданный отдельно упоминает поле "Повторите пароль"

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Кнопка становится активной. Пользователь успешно зарегистрирован. На email приходит письмо о регистрации.
```

**Созданный:**
```
Кнопка становится активной при заполнении всех полей. После нажатия пользователь успешно зарегистрирован. На главном экране отображается дом "Мой дом". Пользователь попадает на главный экран (Dashboard).
```

**Различия:**
- Созданный документ упоминает автосоздание дома (US-002)
- Созданный указывает переход на главный экран
- Пример упоминает письмо о регистрации (в созданном нет)
- Созданный более детально описывает последовательность событий

---

#### TR-1.1 vs US-001: Регистрация - невалидный email

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить шаги TR-1, указав невалидный email.
2. Нажать «Создать аккаунт».
```

**Созданный:**
```
1. Повторить шаги US-001, но указать невалидный email (например, "invalid-email").
2. Нажать "Создать аккаунт".
```

**Различие:** Созданный содержит пример невалидного email.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Поле email подсвечивается красным. Отображается подсказка «Неверный формат электронной почты».
```

**Созданный:**
```
Поле email подсвечивается красным. Отображается подсказка "Неверный формат email". Регистрация не выполняется.
```

**Различие:** Созданный явно указывает, что регистрация не выполняется.

---

#### TR-1.2 vs US-001: Регистрация - пароли не совпадают

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить шаги TR-1, указав разные значения пароля.
2. Нажать «Создать аккаунт».
```

**Созданный:**
```
(Нет отдельной записи для несовпадения паролей)
```

**Различие:** В созданном документе нет отдельной записи для проверки несовпадения паролей. Это может быть упущением.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Поле «Повторите пароль» подсвечивается красным. Сообщение «Пароли не совпадают».
```

**Созданный:**
```
(Нет записи)
```

**Рекомендация:** Добавить проверку несовпадения паролей в созданный документ.

---

#### TR-1.3 vs US-001: Регистрация - пароль не соответствует требованиям

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить шаги TR-1, указав пароль, не соответствующий требованиям.
2. Нажать «Создать аккаунт».
```

**Созданный:**
```
1. Повторить шаги US-001, но указать пароль, не соответствующий требованиям (например, "123").
2. Нажать "Создать аккаунт".
```

**Различие:** Созданный содержит пример невалидного пароля.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Поле «Пароль» подсвечивается красным. Сообщение «Пароль не соответствует требованиям».
```

**Созданный:**
```
Поле пароля подсвечивается красным. Отображается сообщение "Пароль должен содержать 8-16 символов, включая строчные и прописные буквы". Регистрация не выполняется.
```

**Различия:**
- Созданный содержит полный текст сообщения об ошибке
- Созданный явно указывает, что регистрация не выполняется

---

### 2. ВХОД В ПРИЛОЖЕНИЕ

#### TR-2 vs US-003: Вход в приложение - успешный

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Учетная запись зарегистрирована
```

**Созданный:**
```
Пользователь зарегистрирован в системе
```

**Различие:** Похожие формулировки, созданный более развернутый.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. На экране входа указать валидные email и пароль.
2. Нажать «Войти».
```

**Созданный:**
```
1. Открыть экран входа.
2. Ввести корректный email зарегистрированного пользователя.
3. Ввести корректный пароль.
4. Нажать кнопку "Войти".
```

**Различия:**
- Созданный разбивает ввод email и пароля на отдельные шаги
- Созданный более детальный (4 шага vs 2)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Пользователь авторизован и попадает на домашний экран.
```

**Созданный:**
```
Создается сессия пользователя. Отображается главный экран с домами пользователя. Пользователь авторизован.
```

**Различия:**
- Созданный упоминает создание сессии
- Созданный указывает, что отображаются дома пользователя
- Пример использует термин "домашний экран", созданный - "главный экран"

---

#### TR-2.1 vs US-003: Вход - неверный пароль

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Учетная запись зарегистрирована
```

**Созданный:**
```
Пользователь пытается войти в систему
```

**Различие:** Пример более конкретный (требует зарегистрированный аккаунт), созданный более общий.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Указать валидный email и неверный пароль.
2. Нажать «Войти».
```

**Созданный:**
```
1. Открыть экран входа.
2. Ввести неверный email или пароль.
3. Нажать кнопку "Войти".
```

**Различия:**
- Пример проверяет только неверный пароль
- Созданный проверяет неверный email ИЛИ пароль (более общий случай)
- Созданный добавляет шаг "Открыть экран входа"

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Поле «Пароль» подсвечивается красным. Сообщение «Неверный пароль».
```

**Созданный:**
```
Система показывает сообщение "Неверный email или пароль". Пользователь не авторизован. Остается на экране входа.
```

**Различия:**
- Пример указывает конкретное поле (пароль)
- Созданный использует общее сообщение (email или пароль)
- Созданный явно указывает, что пользователь остается на экране входа

---

#### TR-2.2 vs US-003: Вход - несуществующий email

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Аккаунт с указанным email отсутствует
```

**Созданный:**
```
(Нет отдельной записи - объединено с TR-2.1)
```

**Различие:** В созданном документе нет отдельной записи для несуществующего email - это объединено с проверкой неверных данных.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Поле email подсвечивается красным. Сообщение «Пользователь с таким email не найден».
```

**Созданный:**
```
(Нет записи)
```

**Рекомендация:** В созданном документе можно было бы разделить проверки неверного пароля и несуществующего email для большей детализации.

---

### 3. ВОССТАНОВЛЕНИЕ ПАРОЛЯ

#### TR-3 vs US-004: Восстановление пароля

**КРИТИЧЕСКОЕ РАЗЛИЧИЕ В ПОДХОДЕ:**

**Пример (TR-3):**
- Использует **4-значный код подтверждения**
- Код отправляется на email
- Процесс: email → код → новый пароль
- Код действует **5 минут**

**Созданный (US-004):**
- Использует **ссылку восстановления**
- Ссылка отправляется на email
- Процесс: email → ссылка → новый пароль
- Ссылка действует **24 часа**

**Это принципиально разные подходы!**

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Нажать «Восстановить пароль».
2. Указать email и отправить код.
3. Ввести корректный 4-значный код вместе с новым паролем.
4. Нажать «Сохранить».
```

**Созданный:**
```
1. На экране входа нажать ссылку "Забыли пароль?".
2. Ввести email существующего пользователя.
3. Нажать кнопку "Отправить".
```

**Различия:**
- Пример описывает полный процесс (запрос + смена)
- Созданный описывает только запрос (смена пароля в отдельной записи)
- Пример использует код, созданный - ссылку

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Пароль обновлён. Сообщение «Пароль успешно изменён».
```

**Созданный (для запроса):**
```
Система отправляет письмо со ссылкой. Отображается сообщение "Проверьте почту".
```

**Различия:**
- Пример описывает результат смены пароля
- Созданный описывает результат запроса (отправка письма)

---

#### TR-3.1 vs US-004: Просроченная ссылка/код

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Код подтверждения старше 5 минут
```

**Созданный:**
```
Пользователь открыл ссылку восстановления позже 24 часов
```

**Различие:** Разные сроки действия (5 минут vs 24 часа).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить TR-3, введя просроченный код.
2. Нажать «Сохранить».
3. Нажать «Выслать код ещё раз».
```

**Созданный:**
```
1. Открыть просроченную ссылку восстановления.
2. Попытаться ввести новый пароль.
```

**Различия:**
- Пример проверяет возможность повторной отправки кода
- Созданный проверяет только попытку использовать просроченную ссылку

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Код подтверждения устарел». Поле подсвечено красным. Кнопка повторной отправки активна.
```

**Созданный:**
```
Система сообщает "Ссылка истекла". Пароль не меняется.
```

**Различия:**
- Пример упоминает кнопку повторной отправки
- Созданный более краткий

---

#### TR-3.2 vs US-004: Неверный код/ссылка

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Пользователь получил код
```

**Созданный:**
```
(Нет отдельной записи для неверной ссылки)
```

**Различие:** В созданном документе нет отдельной проверки неверной ссылки.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Введён неверный код». Поле подсвечивается красным. Кнопка повторной отправки активируется через 5 минут.
```

**Созданный:**
```
(Нет записи)
```

**Рекомендация:** В созданном документе можно было бы добавить проверку неверной ссылки (если это применимо).

---

### 4. ДОБАВЛЕНИЕ УСТРОЙСТВА

#### TR-4 vs US-010: Добавление устройства через QR-код

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Пользователь сканирует устройство Stets
```

**Созданный:**
```
Пользователь находится на экране "Добавить устройство"
```

**Различие:** Пример более конкретный (устройство Stets), созданный описывает начальное состояние.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Во вкладке «Устройства» нажать «Добавить по QR-коду».
2. Нажать «Сканировать QR-код».
3. Подтвердить данные устройства.
4. Нажать «Сохранить».
```

**Созданный:**
```
1. На экране добавления устройства выбрать "Сканировать QR-код".
2. Направить камеру на валидный QR-код (12 цифр).
3. Подтвердить добавление.
```

**Различия:**
- Пример более детальный (4 шага vs 3)
- Пример упоминает "вкладку Устройства" (навигация)
- Пример упоминает "Подтвердить данные устройства" (промежуточный шаг)
- Созданный указывает формат QR-кода (12 цифр)
- Созданный более краткий

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Данные устройства подставлены. Устройство появляется в списке.
```

**Созданный:**
```
Устройство добавляется в дом. Отображается в списке устройств. Предлагается выбрать комнату. Устройство названо по модели.
```

**Различия:**
- Созданный более детальный (упоминает выбор комнаты, название по модели)
- Пример более краткий

---

#### TR-4.1 vs US-010: QR другого производителя

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Пользователь сканирует чужой QR
```

**Созданный:**
```
(Нет отдельной записи - объединено с невалидным QR)
```

**Различие:** В созданном документе нет отдельной проверки QR другого производителя.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Устройства других производителей не поддерживаются».
```

**Созданный:**
```
(Нет записи)
```

**Рекомендация:** Можно было бы добавить отдельную проверку для QR другого производителя.

---

#### TR-4.2 vs US-012: Повторное добавление устройства

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Устройство уже добавлено
```

**Созданный:**
```
В доме уже есть устройство с кодом "123456789012"
```

**Различие:** Созданный более конкретный (указывает пример кода).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить TR-4 для устройства, которое уже в системе.
```

**Созданный:**
```
1. Попытаться добавить устройство с тем же кодом (через QR или вручную).
2. Подтвердить добавление.
```

**Различия:**
- Созданный более детальный (2 шага)
- Созданный упоминает оба способа добавления (QR и вручную)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Устройство уже добавлено».
```

**Созданный:**
```
Система сообщает "Устройство уже добавлено в дом". Дубликат не создается. В базе остается только одна запись устройства.
```

**Различия:**
- Созданный более детальный (упоминает отсутствие дубликата, состояние базы)

---

#### TR-4.3 vs US-010: Превышение лимита устройств

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В доме уже 100 устройств
```

**Созданный:**
```
В доме уже 100 устройств
```

**Различие:** Идентично.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить TR-4 при заполненном лимите.
```

**Созданный:**
```
1. Повторить шаги US-010, но при наличии 100 устройств в доме.
2. Попытаться добавить новое устройство.
```

**Различие:** Созданный более детальный (2 шага).

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Достигнут лимит на количество устройств (100)».
```

**Созданный:**
```
Система сообщает "Максимум 100 устройств на дом". Устройство не добавляется.
```

**Различие:** Созданный явно указывает, что устройство не добавляется.

---

#### TR-4.4 vs US-011: Добавление устройства вручную

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
—
```

**Созданный:**
```
Пользователь находится в мастере добавления устройства
```

**Различие:** Созданный указывает предусловие.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Нажать «Добавить устройство вручную».
2. Ввести 12-значный ID устройства.
3. Выбрать тип устройства из справочника.
4. Указать пользовательское название (опционально).
5. Подтвердить сохранение.
```

**Созданный:**
```
1. На экране добавления устройства выбрать "Ввести код вручную".
2. Ввести валидный 12-значный код (например, "123456789012").
3. Нажать "Добавить".
```

**КРИТИЧЕСКИЕ РАЗЛИЧИЯ:**
- Пример требует **выбор типа устройства из справочника**
- Созданный не упоминает справочник (тип определяется автоматически)
- Пример упоминает пользовательское название (опционально)
- Созданный более краткий (3 шага vs 5)
- Созданный содержит пример кода

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Устройство появляется в списке с выбранным типом. Статус = `off`, энергосбережение = `false` по умолчанию.
```

**Созданный:**
```
Система валидирует формат кода. Находит устройство. Добавляет его в дом. Предлагает выбрать комнату.
```

**КРИТИЧЕСКИЕ РАЗЛИЧИЯ:**
- Пример указывает статусы по умолчанию (off, false)
- Пример упоминает выбранный тип
- Созданный упоминает выбор комнаты
- Созданный описывает процесс валидации и поиска

---

#### TR-4.5 vs US-014: Удаление устройства

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В доме есть устройства
```

**Созданный:**
```
Устройство "Лампочка в спальне" есть в доме
```

**Различие:** Созданный более конкретный (пример устройства).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Смахнуть карточку устройства влево.
2. Выбрать «Удалить».
3. Подтвердить действие.
```

**Созданный:**
```
1. Открыть карточку устройства.
2. Нажать "Удалить устройство".
3. Подтвердить удаление в диалоге.
```

**Различия:**
- Пример использует свайп (жест)
- Созданный использует кнопку в карточке
- Разные паттерны взаимодействия

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Устройство удалено. Сообщение «Устройство успешно удалено».
```

**Созданный:**
```
Устройство удаляется из дома. Устройство перестает отображаться в общих списках и комнатах. Все настройки устройства удаляются.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (упоминает списки, комнаты, настройки)

---

### 5. УПРАВЛЕНИЕ КОМНАТАМИ

#### TR-5 vs US-007: Добавление комнаты

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
—
```

**Созданный:**
```
Пользователь находится на главном экране дома
```

**Различие:** Созданный указывает предусловие.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть вкладку «Комнаты».
2. Нажать «Добавить комнату».
3. Выбрать тип и иконку.
4. Нажать «Сохранить».
```

**Созданный:**
```
1. На главном экране нажать "Добавить комнату".
2. Ввести название комнаты (например, "Главная спальня").
3. Выбрать тип комнаты (например, "Спальня").
4. Выбрать иконку комнаты.
5. Нажать "Создать".
```

**Различия:**
- Пример упоминает вкладку "Комнаты" (навигация)
- Созданный упоминает ввод названия (обязательное поле)
- Созданный содержит примеры значений
- Созданный более детальный (5 шагов vs 4)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Появляется карточка комнаты. Сообщение «Комната успешно добавлена».
```

**Созданный:**
```
Комната добавляется в дом. Комната отображается в списке комнат на главном экране.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (упоминает отображение в списке)

---

#### TR-5.1 vs US-008: Изменение комнаты

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Есть минимум одна комната
```

**Созданный:**
```
Пользователь смотрит список комнат
```

**Различие:** Пример более конкретный (требует наличие комнаты), созданный описывает состояние пользователя.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату из списка.
2. Нажать «Тип комнаты».
3. Выбрать новое значение.
4. Нажать «Сохранить».
```

**Созданный:**
```
1. Открыть экран комнаты.
2. Нажать кнопку "Редактировать".
3. Изменить название, тип или иконку комнаты.
4. Нажать "Сохранить".
```

**Различия:**
- Пример фокусируется только на изменении типа
- Созданный упоминает изменение названия, типа ИЛИ иконки (более общий)
- Созданный упоминает кнопку "Редактировать" (явное действие)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Тип обновлён. Сообщение «Комната успешно изменена».
```

**Созданный:**
```
Комната обновляется с новыми данными. Изменения сразу отображаются в интерфейсе. Устройства остаются привязанными к комнате.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (упоминает отображение изменений, сохранение устройств)

---

#### TR-5.2 vs US-009: Удаление комнаты

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Есть минимум одна комната
```

**Созданный:**
```
Комната "Коридор" не содержит устройств
```

**Различие:** Созданный более конкретный (указывает, что комната пустая).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату.
2. Нажать «Удалить» → подтвердить.
```

**Созданный:**
```
1. Открыть экран редактирования комнаты.
2. Нажать кнопку "Удалить комнату".
3. Подтвердить удаление.
```

**Различия:**
- Пример более краткий (2 шага)
- Созданный более детальный (3 шага, упоминает экран редактирования)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Комната удалена. Сообщение «Комната успешно удалена».
```

**Созданный:**
```
Комната удаляется из списка. Комната больше не отображается на главном экране.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (упоминает отображение на главном экране)

---

#### TR-5.3 vs US-013: Добавить устройство в комнату

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В системе есть устройства
```

**Созданный:**
```
Устройство уже добавлено в дом
```

**Различие:** Похожие формулировки.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату.
2. Нажать «Добавить устройство».
3. Выбрать устройство → «Сохранить».
```

**Созданный:**
```
1. Открыть карточку устройства.
2. Нажать "Настроить устройство".
3. Выбрать комнату из списка (или оставить "Без комнаты").
4. Сохранить изменения.
```

**КРИТИЧЕСКИЕ РАЗЛИЧИЯ:**
- Пример: добавление устройства В комнату (из комнаты)
- Созданный: привязка устройства К комнате (из карточки устройства)
- Разные точки входа и подходы

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Устройство привязано к комнате. Сообщение «Устройство добавлено в комнату».
```

**Созданный:**
```
Устройство привязывается к выбранной комнате. Устройство отображается в списке устройств выбранной комнаты.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (упоминает отображение в списке)

---

#### TR-5.4 vs US-044: Удалить устройство из комнаты

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Устройство привязано к комнате
```

**Созданный:**
```
Устройство "Лампочка" привязано к комнате "Спальня"
```

**Различие:** Созданный более конкретный (примеры).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату.
2. Свайпнуть устройство влево → «Удалить».
3. Подтвердить.
```

**Созданный:**
```
1. Открыть карточку устройства в комнате.
2. Нажать "Удалить из комнаты".
3. Подтвердить действие.
```

**Различия:**
- Пример использует свайп (жест)
- Созданный использует кнопку в карточке
- Разные паттерны взаимодействия

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Устройство отвязано. Сообщение «Устройство успешно удалено».
```

**Созданный:**
```
Устройство отвязывается от комнаты. Устройство остается в доме без привязки. Устройство отображается в списке устройств без комнаты. Пользователь может затем назначить другую комнату.
```

**Различия:**
- Пример упоминает сообщение (но оно говорит "удалено", что может быть неточно)
- Созданный более детальный (устройство остается в доме, можно назначить другую комнату)

---

#### TR-5.5 vs US-017: Массовое управление устройствами

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В комнате ≥ 1 устройство
```

**Созданный:**
```
В комнате "Спальня" три устройства, одно из них выключено
```

**Различие:** Созданный более конкретный (количество и состояние устройств).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату.
2. Переключить «Включить/выключить все устройства».
```

**Созданный:**
```
1. Открыть экран комнаты.
2. Нажать кнопку "Включить всё".
```

**Различия:**
- Пример упоминает переключатель (один элемент)
- Созданный упоминает кнопку "Включить всё" (отдельная кнопка)
- Созданный проверяет только включение (есть отдельная запись для выключения)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Статус всех устройств меняется.
```

**Созданный:**
```
Все устройства комнаты переходят в состояние "включено". Статусы обновляются в интерфейсе. Устройства вне комнаты не затрагиваются.
```

**Различия:**
- Созданный более детальный (конкретное состояние, обновление интерфейса, изоляция комнаты)

---

#### TR-5.6 vs US-007: Превышение лимита комнат

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В доме 10 комнат
```

**Созданный:**
```
В доме уже 10 комнат
```

**Различие:** Идентично.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Нажать «Добавить комнату».
```

**Созданный:**
```
1. Повторить шаги US-007, но при наличии 10 комнат.
2. Попытаться создать еще одну комнату.
```

**Различие:** Созданный более детальный (2 шага).

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Достигнут лимит на количество комнат (10)».
```

**Созданный:**
```
Система показывает ошибку "Максимум 10 комнат на дом". Комната не создается.
```

**Различия:**
- Пример использует термин "Достигнут лимит"
- Созданный использует термин "Максимум"
- Созданный явно указывает, что комната не создается

---

#### TR-5.7 vs US-016: Энергосберегающий режим

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В комнате есть устройства
```

**Созданный:**
```
Устройство "Лампочка" включено
```

**Различие:** Созданный более конкретный (устройство должно быть включено).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Открыть комнату.
2. Выбрать устройство.
3. Нажать на переключатель энергосбережения.
```

**Созданный:**
```
1. Открыть карточку устройства.
2. Нажать переключатель "Энергосбережение".
```

**Различия:**
- Пример описывает путь через комнату (3 шага)
- Созданный описывает прямой путь к устройству (2 шага)
- Разные точки входа

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Статус энергосбережения меняется.
```

**Созданный:**
```
Режим энергосбережения активируется. Отображается индикатор режима. Устройство реагирует на команды медленнее (до 5 секунд). Потребление энергии снижается.
```

**Различия:**
- Созданный значительно более детальный (индикатор, время реакции, потребление)

---

### 6. СЦЕНАРИИ

#### TR-6 vs US-018: Создание сценария

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В доме есть устройства
```

**Созданный:**
```
Пользователь находится на экране "Сценарии"
```

**Различие:** Пример более конкретный (требует устройства), созданный описывает начальное состояние.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. На экране «Сценарии» нажать «Создать сценарий».
2. Указать название.
3. Добавить устройства и статусы.
4. Задать время и дни.
5. Нажать «Сохранить».
```

**Созданный:**
```
1. Нажать "Создать сценарий".
2. Ввести название "Утренний свет" (до 30 символов).
3. Добавить устройства (например, "Лампочка в спальне" и "Лампочка в ванной").
4. Установить действие "включить" для каждого устройства.
5. Сохранить сценарий.
```

**Различия:**
- Пример упоминает задание времени и дней (расписание)
- Созданный не упоминает расписание в основной записи (есть отдельная запись US-020)
- Созданный содержит примеры (название, устройства)
- Созданный упоминает лимит названия (30 символов)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сценарий сохранён. Сообщение «Сценарий успешно создан».
```

**Созданный:**
```
Сценарий создается. Сценарий отображается в общем списке сценариев.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный упоминает отображение в списке

---

#### TR-6.1 vs US-020: Сценарий с ручным запуском

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
В доме есть устройства
```

**Созданный:**
```
Сценарий создан
```

**Различие:** Пример более конкретный (требует устройства), созданный описывает состояние после создания.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Повторить TR-6, не указывая время и дни.
2. Нажать «Сохранить».
```

**Созданный:**
```
1. Открыть настройки расписания сценария.
2. Оставить расписание выключенным.
3. Сохранить настройки.
```

**Различия:**
- Пример описывает создание без расписания
- Созданный описывает настройку существующего сценария (выключить расписание)
- Разные подходы

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сценарий без расписания сохранён.
```

**Созданный:**
```
Сценарий доступен только для ручного запуска. Автоматический запуск не выполняется.
```

**Различие:** Созданный более детальный.

---

#### TR-6.2 vs US-021: Удаление сценария

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Сценарий существует
```

**Созданный:**
```
Существует сценарий "Старый сценарий"
```

**Различие:** Созданный более конкретный (пример названия).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Свайпнуть карточку сценария влево.
2. Выбрать «Удалить» и подтвердить.
```

**Созданный:**
```
1. Открыть список сценариев.
2. Выбрать сценарий "Старый сценарий".
3. Нажать "Удалить сценарий".
4. Подтвердить действие в диалоге.
```

**Различия:**
- Пример использует свайп (жест)
- Созданный использует кнопку (явное действие)
- Созданный более детальный (4 шага vs 2)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сценарий удалён. Сообщение «Сценарий успешно удалён».
```

**Созданный:**
```
Сценарий удаляется из базы. Сценарий пропадает из списка. Сценарий больше не запускается автоматически.
```

**Различия:**
- Пример упоминает сообщение об успехе
- Созданный более детальный (база, список, автоматический запуск)

---

#### TR-6.3 vs US-019: Запуск сценария

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Есть сценарий с расписанием
```

**Созданный:**
```
Сценарий "Утренний свет" создан и содержит несколько устройств
```

**Различие:** Созданный более конкретный (пример названия, упоминает устройства).

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. На экране «Сценарии» нажать «Запустить» у сценария по расписанию.
```

**Созданный:**
```
1. Открыть список сценариев.
2. Нажать кнопку запуска на карточке сценария "Утренний свет".
```

**Различия:**
- Пример более краткий (1 шаг)
- Созданный более детальный (2 шага)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Статус сценария «Включено», затем «Завершён». Устройства меняют статус.
```

**Созданный:**
```
Устройства выполняют свои действия по порядку. Интерфейс показывает статус "Сценарий выполнен". Все доступные устройства включены.
```

**Различия:**
- Пример упоминает промежуточный статус "Включено"
- Созданный упоминает порядок выполнения и статус "Сценарий выполнен"

---

#### TR-6.4 vs US-019: Запуск ручного сценария

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Есть сценарий без расписания
```

**Созданный:**
```
(Нет отдельной записи - объединено с US-019)
```

**Различие:** В созданном документе нет отдельной записи для ручного сценария - это объединено с общей проверкой запуска.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. На экране «Сценарии» нажать «Включить» у ручного сценария.
```

**Созданный:**
```
(Нет записи)
```

**Рекомендация:** Можно было бы добавить отдельную проверку для ручного сценария.

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Устройства принимают заданные статусы. Сценарий завершается.
```

**Созданный:**
```
(Нет записи)
```

---

#### TR-6.5 vs US-018: Лимит сценариев

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Создано 10 сценариев
```

**Созданный:**
```
В доме уже создано 10 сценариев
```

**Различие:** Идентично.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Нажать «Создать сценарий».
2. Подтвердить предупреждение.
```

**Созданный:**
```
1. Попытаться создать еще один сценарий (11-й).
2. Сохранить сценарий.
```

**Различия:**
- Пример упоминает предупреждение (возможно, система предупреждает заранее)
- Созданный описывает попытку сохранения

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сообщение «Достигнут лимит на количество сценариев (10)».
```

**Созданный:**
```
Система выводит сообщение "Максимум 10 сценариев на дом". Сценарий не создается.
```

**Различия:**
- Пример использует термин "Достигнут лимит"
- Созданный использует термин "Максимум"
- Созданный явно указывает, что сценарий не создается

---

### 7. ПРОФИЛЬ И НАСТРОЙКИ

#### TR-7.2 vs US-005: Изменение email

**КРИТИЧЕСКОЕ РАЗЛИЧИЕ В ПОДХОДЕ:**

**Пример (TR-7.2):**
- Использует **код подтверждения** (4-значный)
- Процесс: новый email → код → подтверждение
- Код отправляется сразу

**Созданный (US-005):**
- Использует **подтверждение через письмо** на новый email
- Процесс: новый email + пароль → письмо на новый email → подтверждение
- Требует подтверждение пароля

**Это принципиально разные подходы!**

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Настройки → «Личные данные».
2. Нажать «Изменить email».
3. Ввести новый email.
4. Нажать «Отправить код».
5. Ввести код и подтвердить.
```

**Созданный:**
```
1. Открыть экран профиля.
2. Нажать кнопку "Изменить email".
3. Ввести новый валидный email.
4. Ввести текущий пароль для подтверждения.
5. Нажать "Сохранить".
```

**КРИТИЧЕСКИЕ РАЗЛИЧИЯ:**
- Пример использует код (5 шагов)
- Созданный использует пароль + письмо (5 шагов, но другой процесс)
- Пример: настройки → личные данные (навигация)
- Созданный: экран профиля (прямой доступ)

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Email изменён. Сообщение «Электронная почта успешно изменена».
```

**Созданный:**
```
Система сохраняет новый email в статусе "ожидает подтверждения". Отправляется письмо на новый email. Отображается сообщение об успехе.
```

**КРИТИЧЕСКИЕ РАЗЛИЧИЯ:**
- Пример: email изменен сразу
- Созданный: email в статусе "ожидает подтверждения" (двухэтапный процесс)

---

#### TR-7.3 vs US-006: Выход из приложения

**ПРЕДУСЛОВИЯ:**

**Пример:**
```
Пользователь авторизован
```

**Созданный:**
```
Пользователь авторизован
```

**Различие:** Идентично.

---

**ШАГИ ПРОВЕРКИ:**

**Пример:**
```
1. Настройки → «Выход из учётной записи».
```

**Созданный:**
```
1. Открыть экран профиля.
2. Нажать кнопку "Выйти".
3. Подтвердить выход (если требуется).
```

**Различия:**
- Пример более краткий (1 шаг, путь через настройки)
- Созданный более детальный (3 шага, путь через профиль)
- Созданный упоминает подтверждение

---

**ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:**

**Пример:**
```
Сессия завершена. Пользователь перенаправлен на экран входа.
```

**Созданный:**
```
Приложение удаляет локальные токены. Сервер закрывает сессию. Отображается экран входа. Для доступа требуется повторная авторизация.
```

**Различия:**
- Созданный более детальный (токены, сервер, повторная авторизация)

---

## Функции, которые есть только в примере

### TR-7: Выдать доступ к дому (совместный доступ)

**В созданном документе:** Нет (не входит в MVP)

**Описание в примере:**
```
1. Настройки → «Совместный доступ».
2. Указать имя, email, дом «Текущий».
3. Выбрать уровень доступа.
4. Нажать «Добавить доступ».
```

**Результат:**
```
Сообщение «Доступ успешно выдан». Приглашение появляется в списке. На email отправлено письмо.
```

---

### TR-7.1: Принять приглашение

**В созданном документе:** Нет (не входит в MVP)

**Описание в примере:**
```
1. На экране «Мой дом» нажать «Принять приглашение».
```

**Результат:**
```
Сообщение «Доступ успешно принят». Доступ к дому открыт.
```

---

## Функции, которые есть только в созданном документе

### US-002: Автосоздание первого дома

**В примере:** Нет

**Описание:**
```
1. Выполнить успешную регистрацию (US-001).
2. Проверить главный экран после регистрации.
```

**Результат:**
```
Автоматически создается дом "Мой дом". Дом отображается на главном экране. Пользователь имеет роль владельца дома.
```

---

### US-015: Включение/выключение устройства - недоступно

**В примере:** Нет отдельной проверки недоступного устройства

**Описание:**
```
1. Попытаться включить недоступное устройство.
2. Нажать переключатель.
```

**Результат:**
```
Система показывает статус "недоступно". Команда не выполняется. Переключатель неактивен.
```

---

### US-019: Ручной запуск сценария - недоступное устройство

**В примере:** Нет отдельной проверки недоступного устройства в сценарии

**Описание:**
```
1. Запустить сценарий, содержащий недоступное устройство.
2. Нажать кнопку запуска.
```

**Результат:**
```
Недоступное устройство пропускается. Остальные устройства выполняют действия. Отображается предупреждение о пропущенном устройстве.
```

---

### US-020: Настройка расписания сценария

**В примере:** Расписание упоминается в TR-6, но нет отдельной детальной проверки

**Описание:**
```
1. Открыть карточку сценария.
2. Нажать "Настроить расписание".
3. Включить расписание.
4. Выбрать дни "Пн-Пт".
5. Задать время начала "07:00".
6. Задать время окончания "08:00" (опционально).
7. Сохранить изменения.
```

**Результат:**
```
Сценарий автоматически запускается в 07:00 в будни. Если указано время окончания, устройства выключаются в 08:00. Расписание активно.
```

---

## Итоговая таблица различий в записях

| Аспект | Пример | Созданный документ |
| --- | --- | --- |
| **Детализация шагов** | Краткие (2-4 шага) | Детальные (3-6 шагов) |
| **Примеры значений** | Редко | Часто (email, пароли, названия) |
| **Ожидаемые результаты** | Краткие, с сообщениями | Детальные, без сообщений |
| **Предусловия** | Общие | Конкретные с примерами |
| **Паттерны взаимодействия** | Свайп, вкладки | Кнопки, карточки |
| **Восстановление пароля** | Код (5 мин) | Ссылка (24 часа) |
| **Изменение email** | Код подтверждения | Письмо на новый email |
| **Добавление устройства вручную** | Требует выбор типа | Тип определяется автоматически |
| **Удаление** | Свайп | Кнопка в карточке |
| **Совместный доступ** | Есть (TR-7) | Нет (не MVP) |
| **Автосоздание дома** | Нет | Есть (US-002) |
| **Обработка недоступных устройств** | Нет отдельной проверки | Есть отдельные проверки |

---

## Критические различия, требующие уточнения

1. **Восстановление пароля:** Код (5 мин) vs Ссылка (24 часа) - нужно уточнить, какой подход используется в вашем проекте
2. **Изменение email:** Код vs Письмо - нужно уточнить подход
3. **Добавление устройства вручную:** Справочник типов vs Автоопределение - нужно уточнить
4. **Паттерны взаимодействия:** Свайп vs Кнопки - нужно уточнить, какие используются в прототипе
5. **Несовпадение паролей:** В созданном документе нет отдельной проверки - рекомендуется добавить

---

## Рекомендации по улучшению созданного документа

1. Добавить проверку несовпадения паролей при регистрации
2. Добавить проверку несуществующего email при входе (отдельно от неверного пароля)
3. Уточнить процесс восстановления пароля (код или ссылка)
4. Уточнить процесс изменения email (код или письмо)
5. Уточнить паттерны взаимодействия (свайп или кнопки)
6. Добавить раздел "Примечания" из примера

