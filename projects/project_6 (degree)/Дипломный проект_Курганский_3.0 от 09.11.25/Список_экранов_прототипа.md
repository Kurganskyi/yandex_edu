# Список экранов прототипа Stets Home

## Общая информация

**Проект:** Stets Home - система управления умным домом  
**Версия прототипа:** 1.0  
**Платформа:** iOS/Android (мобильное приложение)  
**Размер фрейма:** iPhone 13 mini (375 × 812)

**Всего экранов:** 22 экрана для MVP функций  
**Активности:** 3  
**Пользовательских задач:** 8

---

## АКТИВНОСТЬ 1: Войти в приложение

### Задача 1.1: Пройти регистрацию

#### ЭКРАН 1: Экран входа (Login Screen)
**Связанные функции:** US-003, US-004

**Назначение:** Первый экран приложения, точка входа для зарегистрированных пользователей

**Элементы интерфейса:**
- Заголовок "Stets Home" (логотип/название приложения)
- Поле ввода "Email" (текстовое поле, тип email)
- Поле ввода "Пароль" (текстовое поле, тип password, с иконкой показать/скрыть)
- Кнопка "Войти" (основная кнопка)
- Ссылка "Забыли пароль?" (текстовая ссылка под кнопкой входа)
- Ссылка "Зарегистрироваться" (текстовая ссылка внизу экрана)
- Индикатор загрузки (при отправке формы)

**Валидация:**
- Email: проверка формата (regex)
- Пароль: не пустое поле
- Кнопка "Войти" активна только при заполненных полях

**Состояния:**
- **Обычное:** поля пустые, кнопка неактивна
- **Заполнение:** поля заполняются, кнопка становится активной
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Ошибка:** сообщение "Неверный email или пароль" под формой
- **Успех:** переход на главный экран (Dashboard)

**Переходы:**
- → Экран регистрации (по ссылке "Зарегистрироваться")
- → Экран восстановления пароля (по ссылке "Забыли пароль?")
- → Главный экран (Dashboard) при успешном входе

**Gherkin-сценарии:**
- US-003: Сценарий 1 (Успешный вход)
- US-003: Сценарий 2 (Вход с неверными данными)

---

#### ЭКРАН 2: Экран регистрации (Sign Up Screen)
**Связанные функции:** US-001, US-002

**Назначение:** Регистрация нового пользователя в системе

**Элементы интерфейса:**
- Заголовок "Создать аккаунт"
- Поле ввода "Имя" (текстовое поле)
- Поле ввода "Email" (текстовое поле, тип email)
- Поле ввода "Пароль" (текстовое поле, тип password, с иконкой показать/скрыть)
- Поле ввода "Повторите пароль" (текстовое поле, тип password)
- Подсказка под полем пароля: "8-16 символов, строчные и прописные буквы"
- Кнопка "Создать аккаунт" (основная кнопка)
- Ссылка "Уже есть аккаунт? Войти" (текстовая ссылка внизу)
- Индикатор загрузки (при отправке формы)

**Валидация:**
- Имя: не пустое поле, минимум 2 символа
- Email: проверка формата (regex), проверка уникальности на сервере
- Пароль: 8-16 символов, минимум одна строчная и одна прописная латинская буква
- Повторите пароль: должно совпадать с полем "Пароль"
- Кнопка активна только при валидных данных

**Состояния:**
- **Обычное:** поля пустые, кнопка неактивна
- **Заполнение:** поля заполняются, валидация в реальном времени
- **Ошибка валидации email:** сообщение "Неверный формат email" под полем
- **Ошибка валидации пароля:** сообщение "Пароль должен содержать 8-16 символов, включая строчные и прописные буквы"
- **Ошибка дубликата email:** сообщение "Email уже зарегистрирован"
- **Ошибка несовпадения паролей:** сообщение "Пароли не совпадают"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** автоматический переход на главный экран (создается дом "Мой дом")

**Переходы:**
- → Экран входа (по ссылке "Уже есть аккаунт? Войти")
- → Главный экран (Dashboard) при успешной регистрации

**Gherkin-сценарии:**
- US-001: Сценарий 1 (Успешная регистрация)
- US-001: Сценарий 2 (Невалидный email)
- US-001: Сценарий 3 (Невалидный пароль)
- US-001: Сценарий 4 (Дубликат email)
- US-002: Сценарий (Автосоздание первого дома)

---

#### ЭКРАН 3: Экран восстановления пароля - Запрос (Password Recovery Request)
**Связанные функции:** US-004

**Назначение:** Запрос на восстановление пароля через email

**Элементы интерфейса:**
- Заголовок "Восстановление пароля"
- Текст-инструкция: "Введите email, на который мы отправим ссылку для восстановления пароля"
- Поле ввода "Email" (текстовое поле, тип email)
- Кнопка "Отправить" (основная кнопка)
- Ссылка "Вернуться ко входу" (текстовая ссылка)
- Индикатор загрузки (при отправке)

**Валидация:**
- Email: проверка формата (regex)
- Кнопка активна только при валидном email

**Состояния:**
- **Обычное:** поле пустое, кнопка неактивна
- **Заполнение:** поле заполняется, кнопка становится активной
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Ошибка:** сообщение "Email не найден" (если email не существует в системе)
- **Успех:** сообщение "Проверьте почту. Мы отправили ссылку для восстановления пароля"

**Переходы:**
- → Экран входа (по ссылке "Вернуться ко входу")
- → Экран смены пароля (по ссылке из email, открывается в браузере/приложении)

**Gherkin-сценарии:**
- US-004: Сценарий 1 (Запрос восстановления)

---

#### ЭКРАН 4: Экран восстановления пароля - Смена пароля (Password Recovery Change)
**Связанные функции:** US-004

**Назначение:** Ввод нового пароля по ссылке восстановления

**Элементы интерфейса:**
- Заголовок "Создайте новый пароль"
- Поле ввода "Новый пароль" (текстовое поле, тип password)
- Поле ввода "Повторите пароль" (текстовое поле, тип password)
- Подсказка под полем пароля: "8-16 символов, строчные и прописные буквы"
- Кнопка "Сохранить пароль" (основная кнопка)
- Индикатор загрузки (при отправке)

**Валидация:**
- Пароль: 8-16 символов, минимум одна строчная и одна прописная латинская буква
- Повторите пароль: должно совпадать с полем "Новый пароль"
- Кнопка активна только при валидных данных

**Состояния:**
- **Обычное:** поля пустые, кнопка неактивна
- **Заполнение:** поля заполняются, валидация в реальном времени
- **Ошибка валидации пароля:** сообщение "Пароль должен содержать 8-16 символов, включая строчные и прописные буквы"
- **Ошибка несовпадения паролей:** сообщение "Пароли не совпадают"
- **Ошибка просроченной ссылки:** сообщение "Ссылка истекла. Запросите новую ссылку"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** сообщение "Пароль успешно изменен", переход на экран входа

**Переходы:**
- → Экран входа (после успешной смены пароля)

**Gherkin-сценарии:**
- US-004: Сценарий 2 (Просроченная ссылка)
- US-004: Сценарий 3 (Смена пароля)

---

### Задача 1.2: Управлять учётной записью

#### ЭКРАН 5: Экран профиля (Profile Screen)
**Связанные функции:** US-005, US-006

**Назначение:** Просмотр и управление данными профиля пользователя

**Элементы интерфейса:**
- Заголовок "Профиль" (в навигации)
- Аватар пользователя (круглая иконка, можно заменить)
- Имя пользователя (текст, крупный шрифт)
- Email пользователя (текст, средний шрифт)
- Кнопка "Изменить email" (вторичная кнопка)
- Раздел "Настройки" (заголовок секции)
- Кнопка "Выйти" (красная кнопка, внизу экрана)
- Индикатор загрузки (при операциях)

**Состояния:**
- **Обычное:** отображение данных пользователя
- **Загрузка:** индикатор загрузки при обновлении данных
- **Ошибка:** сообщение об ошибке (если не удалось загрузить данные)

**Переходы:**
- → Экран изменения email (по кнопке "Изменить email")
- → Экран входа (по кнопке "Выйти" с подтверждением)

**Gherkin-сценарии:**
- US-006: Сценарий (Выход из приложения)

---

#### ЭКРАН 6: Экран изменения email (Change Email Screen)
**Связанные функции:** US-005

**Назначение:** Изменение email пользователя с подтверждением пароля

**Элементы интерфейса:**
- Заголовок "Изменить email" (в навигации)
- Текущий email (текст, только для чтения)
- Поле ввода "Новый email" (текстовое поле, тип email)
- Поле ввода "Подтвердите пароль" (текстовое поле, тип password)
- Кнопка "Сохранить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Индикатор загрузки (при отправке)

**Валидация:**
- Новый email: проверка формата (regex), проверка уникальности на сервере
- Пароль: не пустое поле, проверка на сервере
- Кнопка активна только при валидных данных

**Состояния:**
- **Обычное:** поля пустые, кнопка неактивна
- **Заполнение:** поля заполняются, валидация в реальном времени
- **Ошибка валидации email:** сообщение "Неверный формат email"
- **Ошибка дубликата email:** сообщение "Email уже зарегистрирован"
- **Ошибка неверного пароля:** сообщение "Неверный пароль"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** сообщение "Письмо с подтверждением отправлено на новый email", возврат на экран профиля

**Переходы:**
- → Экран профиля (по кнопке "Отмена" или после успешного сохранения)

**Gherkin-сценарии:**
- US-005: Сценарий 1 (Успешное изменение)
- US-005: Сценарий 2 (Невалидный email)
- US-005: Сценарий 3 (Email уже используется)

---

## АКТИВНОСТЬ 2: Организовать умный дом

### Задача 2.1: Добавить устройство

#### ЭКРАН 7: Главный экран (Dashboard / Home Screen)
**Связанные функции:** US-002, US-007, US-015, US-017, US-018

**Назначение:** Основной экран приложения с обзором дома, комнат и устройств

**Элементы интерфейса:**
- Заголовок "Мой дом" (название дома, можно редактировать)
- Кнопка "Добавить комнату" (плавающая кнопка или кнопка в шапке)
- Список комнат (карточки комнат с иконками)
  - Название комнаты
  - Иконка комнаты
  - Количество устройств в комнате
  - Кнопка "Включить всё" / "Выключить всё" (для комнаты)
- Раздел "Устройства без комнаты" (если есть)
  - Список устройств без привязки к комнате
- Раздел "Сценарии" (если есть)
  - Список сценариев с кнопками запуска
  - Кнопка "Создать сценарий"
- Кнопка профиля (иконка в правом верхнем углу)
- Индикаторы статуса устройств (включено/выключено)

**Состояния:**
- **Пустой дом:** сообщение "Добавьте первую комнату или устройство"
- **С комнатами:** отображение списка комнат
- **С устройствами:** отображение устройств в комнатах
- **Загрузка:** индикатор загрузки при обновлении данных

**Переходы:**
- → Экран добавления комнаты (по кнопке "Добавить комнату")
- → Экран комнаты (при нажатии на карточку комнаты)
- → Экран добавления устройства (из меню или кнопки)
- → Экран создания сценария (по кнопке "Создать сценарий")
- → Экран профиля (по кнопке профиля)
- → Экран устройства (при нажатии на устройство)

**Gherkin-сценарии:**
- US-002: Сценарий (Автосоздание первого дома - отображение)
- US-017: Сценарий 1 (Включить все устройства)
- US-017: Сценарий 2 (Выключить все устройства)

---

#### ЭКРАН 8: Экран добавления устройства (Add Device Screen)
**Связанные функции:** US-010, US-011, US-012

**Назначение:** Мастер добавления нового устройства в дом

**Элементы интерфейса:**
- Заголовок "Добавить устройство" (в навигации)
- Кнопка "Сканировать QR-код" (основная кнопка, большая)
- Разделитель "или"
- Кнопка "Ввести код вручную" (вторичная кнопка)
- Индикатор загрузки (при сканировании/проверке)

**Состояния:**
- **Обычное:** две кнопки выбора способа добавления
- **Сканирование:** открытие камеры для сканирования QR-кода
- **Ручной ввод:** переход на экран ввода кода
- **Загрузка:** индикатор загрузки при проверке кода

**Переходы:**
- → Экран сканирования QR-кода (по кнопке "Сканировать QR-код")
- → Экран ввода кода вручную (по кнопке "Ввести код вручную")
- → Главный экран (при отмене)

**Gherkin-сценарии:**
- US-010: Сценарий 1 (Успешное добавление - начало)
- US-011: Сценарий (Добавление устройства вручную - начало)

---

#### ЭКРАН 9: Экран сканирования QR-кода (QR Code Scanner)
**Связанные функции:** US-010, US-012

**Назначение:** Сканирование QR-кода устройства для добавления

**Элементы интерфейса:**
- Видоискатель камеры (прямоугольная рамка по центру)
- Текст-инструкция: "Наведите камеру на QR-код устройства"
- Кнопка "Отмена" (вторичная кнопка)
- Индикатор загрузки (при обработке отсканированного кода)

**Валидация:**
- QR-код должен содержать 12 цифр
- Проверка наличия устройства в базе
- Проверка лимита (максимум 100 устройств на дом)
- Проверка дубликатов (устройство уже в доме)

**Состояния:**
- **Сканирование:** активная камера, ожидание QR-кода
- **Обработка:** индикатор загрузки после сканирования
- **Ошибка невалидного кода:** сообщение "Неверный код устройства"
- **Ошибка лимита:** сообщение "Максимум 100 устройств на дом"
- **Ошибка дубликата:** сообщение "Устройство уже добавлено в дом"
- **Успех:** переход на экран настройки устройства

**Переходы:**
- → Экран настройки устройства (при успешном сканировании)
- → Экран добавления устройства (при отмене или ошибке)

**Gherkin-сценарии:**
- US-010: Сценарий 1 (Успешное добавление - сканирование)
- US-010: Сценарий 2 (Невалидный QR)
- US-010: Сценарий 3 (Превышение лимита)
- US-012: Сценарий (Предотвращение дубликатов - QR)

---

#### ЭКРАН 10: Экран ввода кода вручную (Manual Code Input)
**Связанные функции:** US-011, US-012

**Назначение:** Ввод 12-значного кода устройства вручную

**Элементы интерфейса:**
- Заголовок "Введите код устройства" (в навигации)
- Текст-инструкция: "Введите 12-значный код с упаковки устройства"
- Поле ввода "Код устройства" (текстовое поле, числовая клавиатура, маска 12 цифр)
- Кнопка "Добавить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Индикатор загрузки (при проверке кода)

**Валидация:**
- Код: только цифры, длина 12 символов
- Проверка наличия устройства в базе
- Проверка лимита (максимум 100 устройств на дом)
- Проверка дубликатов

**Состояния:**
- **Обычное:** поле пустое, кнопка неактивна
- **Заполнение:** ввод кода, валидация в реальном времени
- **Ошибка формата:** сообщение "Код должен содержать 12 цифр"
- **Ошибка лимита:** сообщение "Максимум 100 устройств на дом"
- **Ошибка дубликата:** сообщение "Устройство уже добавлено в дом"
- **Ошибка не найден:** сообщение "Устройство не найдено"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** переход на экран настройки устройства

**Переходы:**
- → Экран настройки устройства (при успешной проверке кода)
- → Экран добавления устройства (при отмене)

**Gherkin-сценарии:**
- US-011: Сценарий (Добавление устройства вручную)
- US-012: Сценарий (Предотвращение дубликатов - ручной ввод)

---

#### ЭКРАН 11: Экран настройки устройства (Device Setup Screen)
**Связанные функции:** US-010, US-011, US-013

**Назначение:** Настройка добавленного устройства (выбор комнаты, название)

**Элементы интерфейса:**
- Заголовок "Настроить устройство" (в навигации)
- Информация об устройстве:
  - Модель устройства (текст, только для чтения)
  - Код устройства (текст, только для чтения)
- Поле ввода "Название" (текстовое поле, предзаполнено названием модели)
- Поле выбора "Комната" (выпадающий список или кнопка выбора)
  - Опция "Без комнаты"
  - Список существующих комнат
- Кнопка "Сохранить" (основная кнопка)
- Кнопка "Пропустить" (вторичная кнопка, если комната не обязательна)
- Индикатор загрузки (при сохранении)

**Валидация:**
- Название: не пустое поле (можно оставить название модели)
- Комната: опционально, можно выбрать "Без комнаты"

**Состояния:**
- **Обычное:** поля заполнены значениями по умолчанию
- **Выбор комнаты:** открытие списка комнат
- **Загрузка:** индикатор загрузки при сохранении
- **Успех:** переход на главный экран, устройство отображается в выбранной комнате

**Переходы:**
- → Экран выбора комнаты (при нажатии на поле "Комната")
- → Главный экран (после сохранения или пропуска)

**Gherkin-сценарии:**
- US-010: Сценарий 1 (Успешное добавление - настройка)
- US-011: Сценарий (Добавление устройства вручную - настройка)
- US-013: Сценарий (Привязка устройства к комнате)

---

### Задача 2.2: Настроить устройство

#### ЭКРАН 12: Экран устройства (Device Details Screen)
**Связанные функции:** US-013, US-014, US-015, US-016, US-044

**Назначение:** Детальный просмотр и управление устройством

**Элементы интерфейса:**
- Заголовок с названием устройства (в навигации)
- Кнопка "Настроить" (иконка в правом верхнем углу)
- Статус устройства:
  - Индикатор включено/выключено (большой переключатель)
  - Текст статуса ("Включено" / "Выключено" / "Недоступно")
- Информация об устройстве:
  - Модель (текст)
  - Комната (текст, ссылка на комнату)
  - Код устройства (текст)
- Режим энергосбережения:
  - Переключатель "Энергосбережение"
  - Индикатор активности режима
- Действия:
  - Кнопка "Удалить из комнаты" (если устройство привязано к комнате)
  - Кнопка "Удалить устройство" (красная кнопка внизу)
- Индикатор загрузки (при операциях)

**Состояния:**
- **Включено:** переключатель активен, индикатор горит
- **Выключено:** переключатель неактивен
- **Недоступно:** переключатель неактивен, серый цвет, текст "Недоступно"
- **Энергосбережение активно:** индикатор режима включен (только для включенных устройств)
- **Загрузка:** индикатор загрузки при отправке команд

**Переходы:**
- → Экран редактирования устройства (по кнопке "Настроить")
- → Экран комнаты (при нажатии на название комнаты)
- → Диалог подтверждения удаления (по кнопке "Удалить устройство")
- → Главный экран (после удаления)

**Gherkin-сценарии:**
- US-015: Сценарий 1 (Включение устройства)
- US-015: Сценарий 2 (Устройство недоступно)
- US-016: Сценарий 1 (Включение энергосбережения)
- US-016: Сценарий 2 (Попытка включить на выключенном устройстве)
- US-044: Сценарий (Удаление устройства из комнаты)

---

#### ЭКРАН 13: Экран редактирования устройства (Edit Device Screen)
**Связанные функции:** US-013, US-014

**Назначение:** Редактирование настроек устройства (название, комната)

**Элементы интерфейса:**
- Заголовок "Редактировать устройство" (в навигации)
- Поле ввода "Название" (текстовое поле)
- Поле выбора "Комната" (выпадающий список)
  - Опция "Без комнаты"
  - Список существующих комнат
- Кнопка "Сохранить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Кнопка "Удалить устройство" (красная кнопка внизу)
- Индикатор загрузки (при сохранении)

**Валидация:**
- Название: не пустое поле
- Комната: опционально

**Состояния:**
- **Обычное:** поля заполнены текущими значениями
- **Изменение:** поля редактируются
- **Загрузка:** индикатор загрузки при сохранении
- **Успех:** возврат на экран устройства с обновленными данными

**Переходы:**
- → Экран устройства (после сохранения или отмены)
- → Диалог подтверждения удаления (по кнопке "Удалить устройство")

**Gherkin-сценарии:**
- US-013: Сценарий (Привязка устройства к комнате - редактирование)
- US-014: Сценарий (Удаление устройства)

---

### Задача 2.3: Добавить комнату

#### ЭКРАН 14: Экран добавления комнаты (Add Room Screen)
**Связанные функции:** US-007

**Назначение:** Создание новой комнаты в доме

**Элементы интерфейса:**
- Заголовок "Добавить комнату" (в навигации)
- Поле ввода "Название комнаты" (текстовое поле, обязательное)
- Поле выбора "Тип комнаты" (выпадающий список или кнопки выбора)
  - Варианты: Гостиная, Спальня, Кухня, Ванная, Коридор, Другое
- Поле выбора "Иконка" (сетка иконок для выбора)
- Кнопка "Создать" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Индикатор загрузки (при создании)

**Валидация:**
- Название: не пустое поле, обязательно
- Тип: обязательно выбран один из вариантов
- Иконка: опционально, можно выбрать по умолчанию
- Проверка лимита: максимум 10 комнат на дом

**Состояния:**
- **Обычное:** поля пустые, кнопка неактивна
- **Заполнение:** поля заполняются, кнопка становится активной
- **Ошибка пустого названия:** сообщение "Название обязательно"
- **Ошибка лимита:** сообщение "Максимум 10 комнат на дом"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** возврат на главный экран, комната отображается в списке

**Переходы:**
- → Главный экран (после создания или отмены)

**Gherkin-сценарии:**
- US-007: Сценарий 1 (Создание комнаты)
- US-007: Сценарий 2 (Превышение лимита)
- US-007: Сценарий 3 (Пустое название)

---

#### ЭКРАН 15: Экран комнаты (Room Screen)
**Связанные функции:** US-008, US-009, US-015, US-017

**Назначение:** Просмотр и управление устройствами в комнате

**Элементы интерфейса:**
- Заголовок с названием комнаты (в навигации)
- Кнопка "Редактировать" (иконка в правом верхнем углу)
- Иконка комнаты (крупная, в шапке)
- Кнопки группового управления:
  - Кнопка "Включить всё" (основная кнопка)
  - Кнопка "Выключить всё" (вторичная кнопка)
- Список устройств в комнате:
  - Карточка устройства с названием
  - Переключатель включено/выключено
  - Индикатор статуса
- Кнопка "Добавить устройство" (плавающая кнопка или кнопка в списке)
- Индикатор загрузки (при операциях)

**Состояния:**
- **Пустая комната:** сообщение "В комнате нет устройств. Добавьте первое устройство"
- **С устройствами:** список устройств с переключателями
- **Загрузка:** индикатор загрузки при обновлении статусов
- **Частичное состояние:** часть устройств включена, часть выключена

**Переходы:**
- → Экран редактирования комнаты (по кнопке "Редактировать")
- → Экран устройства (при нажатии на карточку устройства)
- → Экран добавления устройства (по кнопке "Добавить устройство")
- → Главный экран (при возврате назад)

**Gherkin-сценарии:**
- US-015: Сценарий 1 (Включение устройства - из комнаты)
- US-017: Сценарий 1 (Включить все устройства)
- US-017: Сценарий 2 (Выключить все устройства)

---

#### ЭКРАН 16: Экран редактирования комнаты (Edit Room Screen)
**Связанные функции:** US-008, US-009

**Назначение:** Редактирование данных комнаты (название, тип, иконка)

**Элементы интерфейса:**
- Заголовок "Редактировать комнату" (в навигации)
- Поле ввода "Название комнаты" (текстовое поле)
- Поле выбора "Тип комнаты" (выпадающий список)
- Поле выбора "Иконка" (сетка иконок)
- Кнопка "Сохранить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Кнопка "Удалить комнату" (красная кнопка внизу)
- Индикатор загрузки (при сохранении)

**Валидация:**
- Название: не пустое поле
- Тип: обязательно выбран
- Проверка при удалении: комната с устройствами не может быть удалена

**Состояния:**
- **Обычное:** поля заполнены текущими значениями
- **Изменение:** поля редактируются
- **Ошибка при удалении:** сообщение "В комнате есть устройства. Сначала переместите их в другие комнаты"
- **Загрузка:** индикатор загрузки при сохранении
- **Успех:** возврат на экран комнаты с обновленными данными

**Переходы:**
- → Экран комнаты (после сохранения или отмены)
- → Диалог подтверждения удаления (по кнопке "Удалить комнату", если комната пустая)

**Gherkin-сценарии:**
- US-008: Сценарий (Редактирование комнат)
- US-009: Сценарий 1 (Удаление пустой комнаты)
- US-009: Сценарий 2 (Удаление комнаты с устройствами)

---

## АКТИВНОСТЬ 3: Управлять умным домом

### Задача 3.3: Управлять автоматизацией

#### ЭКРАН 17: Экран списка сценариев (Scenarios List Screen)
**Связанные функции:** US-018, US-019, US-021

**Назначение:** Просмотр всех созданных сценариев и их управление

**Элементы интерфейса:**
- Заголовок "Сценарии" (в навигации)
- Кнопка "Создать сценарий" (основная кнопка, плавающая или в шапке)
- Список сценариев:
  - Карточка сценария с названием
  - Индикатор расписания (если настроено)
  - Кнопка "Запустить" (на карточке)
  - Кнопка "Настроить" (иконка на карточке)
- Сообщение "Нет сценариев" (если список пуст)
- Индикатор загрузки (при операциях)

**Состояния:**
- **Пустой список:** сообщение "Создайте первый сценарий для автоматизации"
- **Со сценариями:** список карточек сценариев
- **Загрузка:** индикатор загрузки при обновлении
- **Выполнение сценария:** индикатор выполнения на карточке

**Переходы:**
- → Экран создания сценария (по кнопке "Создать сценарий")
- → Экран редактирования сценария (по кнопке "Настроить")
- → Главный экран (при возврате назад)

**Gherkin-сценарии:**
- US-019: Сценарий 1 (Успешный запуск - из списка)
- US-021: Сценарий (Удаление сценария - начало)

---

#### ЭКРАН 18: Экран создания сценария (Create Scenario Screen)
**Связанные функции:** US-018

**Назначение:** Создание нового сценария с выбором устройств и действий

**Элементы интерфейса:**
- Заголовок "Создать сценарий" (в навигации)
- Поле ввода "Название сценария" (текстовое поле, максимум 30 символов)
- Счетчик символов (X/30)
- Раздел "Устройства и действия":
  - Кнопка "Добавить устройство" (вторичная кнопка)
  - Список выбранных устройств:
    - Название устройства
    - Выбор действия: "Включить" / "Выключить" (переключатель)
    - Кнопка "Удалить" (иконка)
- Кнопка "Сохранить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)
- Индикатор загрузки (при сохранении)

**Валидация:**
- Название: не пустое, максимум 30 символов
- Устройства: минимум одно устройство должно быть добавлено
- Проверка лимита: максимум 10 сценариев на дом

**Состояния:**
- **Обычное:** поле названия пустое, список устройств пуст, кнопка неактивна
- **Заполнение:** название вводится, устройства добавляются
- **Ошибка длинного названия:** сообщение "Название должно быть не более 30 символов"
- **Ошибка пустого списка:** сообщение "Добавьте хотя бы одно устройство"
- **Ошибка лимита:** сообщение "Максимум 10 сценариев на дом"
- **Загрузка:** индикатор загрузки, кнопка неактивна
- **Успех:** возврат на экран списка сценариев, новый сценарий отображается

**Переходы:**
- → Экран выбора устройств (по кнопке "Добавить устройство")
- → Экран списка сценариев (после сохранения или отмены)

**Gherkin-сценарии:**
- US-018: Сценарий 1 (Создание сценария "Утро")
- US-018: Сценарий 2 (Превышение лимита сценариев)
- US-018: Сценарий 3 (Слишком длинное название)

---

#### ЭКРАН 19: Экран выбора устройств для сценария (Select Devices for Scenario)
**Связанные функции:** US-018

**Назначение:** Выбор устройств для добавления в сценарий

**Элементы интерфейса:**
- Заголовок "Выберите устройства" (в навигации)
- Поиск устройств (поле поиска, опционально)
- Список доступных устройств:
  - Карточка устройства с названием
  - Комната устройства (текст)
  - Чекбокс для выбора
- Кнопка "Добавить" (основная кнопка)
- Кнопка "Отмена" (вторичная кнопка)

**Состояния:**
- **Обычное:** список всех устройств дома
- **Поиск:** отфильтрованный список по запросу
- **Выбор:** устройства помечаются чекбоксами
- **Успех:** возврат на экран создания сценария с выбранными устройствами

**Переходы:**
- → Экран создания сценария (после выбора устройств или отмены)

**Gherkin-сценарии:**
- US-018: Сценарий 1 (Создание сценария - выбор устройств)

---

#### ЭКРАН 20: Экран редактирования сценария (Edit Scenario Screen)
**Связанные функции:** US-019, US-020, US-021

**Назначение:** Просмотр и редактирование существующего сценария, настройка расписания

**Элементы интерфейса:**
- Заголовок с названием сценария (в навигации)
- Кнопка "Запустить" (основная кнопка, в шапке)
- Раздел "Устройства":
  - Список устройств сценария с действиями
  - Кнопка "Изменить устройства" (вторичная кнопка)
- Раздел "Расписание":
  - Переключатель "Включить расписание"
  - Поле выбора "Дни недели" (множественный выбор)
  - Поле ввода "Время начала" (выбор времени)
  - Поле ввода "Время окончания" (выбор времени, опционально)
- Кнопка "Сохранить изменения" (основная кнопка)
- Кнопка "Удалить сценарий" (красная кнопка внизу)
- Индикатор загрузки (при операциях)
- Индикатор выполнения (при запуске сценария)

**Валидация:**
- Расписание: если включено, обязательно выбраны дни и время начала
- Время окончания: опционально

**Состояния:**
- **Обычное:** отображение текущих настроек сценария
- **Редактирование:** поля редактируются
- **Расписание включено:** отображаются поля расписания
- **Расписание выключено:** поля расписания скрыты
- **Выполнение:** индикатор выполнения, статус "Сценарий выполняется"
- **Загрузка:** индикатор загрузки при сохранении

**Переходы:**
- → Экран выбора устройств (по кнопке "Изменить устройства")
- → Экран списка сценариев (после сохранения или удаления)
- → Диалог подтверждения удаления (по кнопке "Удалить сценарий")

**Gherkin-сценарии:**
- US-019: Сценарий 1 (Успешный запуск - из редактирования)
- US-019: Сценарий 2 (Недоступное устройство)
- US-020: Сценарий 1 (Настройка расписания)
- US-020: Сценарий 2 (Только ручной запуск)
- US-021: Сценарий (Удаление сценария)

---

## Карта переходов между экранами

### Основной поток (First Time User)
1. **Экран входа** → Экран регистрации
2. **Экран регистрации** → Главный экран (после регистрации)
3. **Главный экран** → Экран добавления комнаты
4. **Главный экран** → Экран добавления устройства
5. **Экран добавления устройства** → Экран сканирования QR / Экран ввода кода
6. **Экран настройки устройства** → Главный экран

### Поток управления устройствами
1. **Главный экран** → Экран комнаты
2. **Экран комнаты** → Экран устройства
3. **Экран устройства** → Экран редактирования устройства
4. **Экран комнаты** → Экран редактирования комнаты

### Поток автоматизации
1. **Главный экран** → Экран списка сценариев
2. **Экран списка сценариев** → Экран создания сценария
3. **Экран создания сценария** → Экран выбора устройств
4. **Экран списка сценариев** → Экран редактирования сценария

### Поток профиля
1. **Главный экран** → Экран профиля
2. **Экран профиля** → Экран изменения email
3. **Экран профиля** → Экран входа (выход)

### Поток восстановления пароля
1. **Экран входа** → Экран восстановления пароля (запрос)
2. **Экран восстановления пароля (запрос)** → Экран восстановления пароля (смена)
3. **Экран восстановления пароля (смена)** → Экран входа

---

## Итоговая статистика экранов

**Всего экранов:** 20 основных экранов

**По активностям:**
- АКТИВНОСТЬ 1: Войти в приложение - 6 экранов
- АКТИВНОСТЬ 2: Организовать умный дом - 10 экранов
- АКТИВНОСТЬ 3: Управлять умным домом - 4 экрана

**Дополнительные элементы:**
- Диалоги подтверждения (удаление устройства, комнаты, сценария)
- Модальные окна (выбор комнаты, выбор устройств)
- Сообщения об ошибках и успехе

---

## Примечания для разработки в Figma

1. **Размер фрейма:** Все экраны должны использовать фрейм iPhone 13 mini (375 × 812)
2. **Дизайн-система:** Использовать компоненты из предоставленной дизайн-системы
3. **Навигация:** Показать стрелками переходы между экранами
4. **Состояния:** Для каждого экрана показать основные состояния (обычное, загрузка, ошибка, успех)
5. **Валидация:** Визуально показать ошибки валидации под полями
6. **Индикаторы:** Использовать стандартные индикаторы загрузки из дизайн-системы

