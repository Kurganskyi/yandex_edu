# DFD Level 1 - Упрощенная визуальная диаграмма (классический стиль)

## Описание

Упрощенная версия DFD Level 1 в классическом стиле DFD (нотация Гейна-Сарсона), максимально приближенная к визуальному формату традиционных диаграмм потоков данных.

---

## Текстовая схема DFD Level 1

```
                         ┌─────────────────────────────────────────────────────────────────────┐
                         │                    Stets Home App (Level 1)                          │
                         └─────────────────────────────────────────────────────────────────────┘

   ┌───────────┐
   │           │   Данные регистрации          ┌──────────────────┐        Новый пользователь  ┌─────────┐
   │           │───────────────────────────────▶│ 1.0 Управлять    │───────────────────────────▶│         │
   │           │                                │ учетной записью  │                            │ D1:     │
   │           │   Токен авторизации            │                  │◀───────────────────────────│ Users   │
   │           │◀───────────────────────────────│                  │   Проверка учетных данных │         │
   │Пользователь│   Подтверждение регистрации  └──────────────────┘                            └─────────┘
   │           │
   │           │   Настройки дома              ┌──────────────────┐       Новый дом    ┌─────────┐
   │           │───────────────────────────────▶│ 2.0 Управлять    │───────────────────▶│         │
   │           │                                │ домом            │                    │ D2:     │
   │           │   Структура домов              │                  │                    │ Homes   │
   │           │◀───────────────────────────────│                  │                    │         │
   │           │                                │                  │  Приглашения      ┌─────────┐
   │           │   Приглашения участников       │                  ├───────────────────▶│         │
   │           │───────────────────────────────▶│                  │                   │ D3:     │
   │           │   Обновления доступа           │                  │◀──────────────────│ User    │
   │           │◀───────────────────────────────│                  │  Данные участников│ Homes   │
   │           │                                └──────────────────┘                   │         │
   │           │                                                                      └─────────┘
   │           │   Данные комнаты              ┌──────────────────┐       Новая комната  ┌─────────┐
   │           │───────────────────────────────▶│ 3.0 Управлять    │─────────────────────▶│         │
   │           │                                │ комнатой         │                     │ D4:     │
   │           │   Список комнат                │                  │                     │ Rooms   │
   │           │◀───────────────────────────────│                  │                     │         │
   │           │                                │                  │◀────────────────────│         │
   │           │                                │                  │   Данные о комнатах └─────────┘
   │           │                                │                  │
   │           │                                │                  │◀────────────────────  ┌─────────┐
   │           │                                │                  │   Чтение иконок      │         │
   │           │   QR-коды/коды устройств       │                  │                      │ D5:     │
   │           │───────────────────────────────▶│ 4.0 Управлять    │                      │ Icons   │
   │           │   Команды управления           │ устройством      │   Новое устройство   │         │
   │           │───────────────────────────────▶│                  ├──────────────────────│         │
   │           │   Список устройств             │                  │                      └─────────┘
   │           │◀───────────────────────────────│                  │
   │           │                                │                  │◀────────────────────  ┌─────────┐
   │           │                                │                  │   Данные об устройствах│         │
   │           │   Конфигурация сценариев       │                  │                       │ D6:     │
   │           │───────────────────────────────▶│ 5.0 Управлять    │                       │ Devices │
   │           │   Запросы запуска              │ сценарием        │                       │         │
   │           │───────────────────────────────▶│                  │                       │         │
   │           │   Список сценариев             │                  │                       └─────────┘
   │           │◀───────────────────────────────│                  │
   │           │   Статус выполнения            │                  │
   │           │◀───────────────────────────────│                  │◀────────────────────  ┌─────────┐
   └───────────┘                                │                  │   Данные о моделях    │         │
                                                │                  │                       │ D7:     │
                                                └──────────────────┘                       │ Device  │
                                                       │                                  │ Models  │
                                                       │ Команды выполнения              │         │
                                                       │                                  └─────────┘
                                                       ▼
                                                ┌──────────────────┐        Новый сценарий ┌─────────┐
                                                │                  │                       │         │
                                                │                  ├──────────────────────▶│ D8:     │
                                                │                  │                       │ Scenario│
                                                │                  │                       │         │
                                                │                  │◀──────────────────────│         │
                                                │                  │  Данные о сценариях   └─────────┘
                                                │                  │
                                                │                  ├──────────────────────▶  ┌─────────┐
                                                │                  │    Расписание          │         │
                                                │                  │                        │ D9:     │
                                                │                  │◀──────────────────────│ Scenario│
                                                │                  │  Данные расписания    │ Schedul │
                                                │                  │                        │         │
                                                │                  ├──────────────────────▶  └─────────┘
                                                │                  │    Действия            ┌─────────┐
                                                │                  │                        │         │
                                                │                  │◀──────────────────────│ D10:    │
                                                │                  │  Данные действий      │ Scenario│
                                                │                  │                        │ Actions │
                                                └──────────────────┘                        │         │
                                                       │                                   └─────────┘
                                                       │
                                                       │ Обновления статуса
                                                       ▼
                                                ┌──────────────────┐
                                                │ 6.0 Синхронизация│
                                                │ с IoT            │
                                                │                  │
                                                │                  │
                                                └──────────────────┘
                                                       ▲          │
                                                       │          ▼
                                              Статус устройств  Обновления статуса
                                                       │          │
                                                       │          ▼
                                                       │   ┌──────────┐
                                                       │   │ D6:      │
                                                       │   │ Devices  │
                                                       │   │          │
                                                       │   └──────────┘
   ┌──────────────┐
   │              │   Статус устройств
   │Умные         │─────────────────┐
   │устройства    │                 │
   │Stets         │                 │
   │              │                 │
   │              │◀────────────────┘
   │              │   Команды управления
   └──────────────┘   Запросы статуса

   ┌──────────────┐
   │              │   Статус доставки
   │ Email        │◀─────────────────┐
   │ Service      │                  │
   │              │                  │
   │              │──────────────────┘
   │              │   Запросы отправки
   └──────────────┘   (восстановление, приглашения)
```

---

## Условные обозначения

- **Прямоугольник** = Внешняя сущность (Пользователь, Устройства, Email)
- **Округленный прямоугольник** = Процесс (1.0, 2.0, 3.0 и т.д.)
- **Открытый прямоугольник с двумя линиями** = Хранилище данных (D1, D2, D3 и т.д.)
- **Стрелка** = Поток данных (с надписью)

---

## Ключевые отличия от предоставленной DFD

### ✅ Наша модель включает:

1. **Больше хранилищ данных** (10 vs 5):
   - D3: User_Homes (связь пользователей и домов)
   - D5: Icons (справочник иконок)
   - D7: Device_Models (справочник моделей)
   - D9: Scenario_Schedules (расписания сценариев)
   - D10: Scenario_Actions (действия сценариев)

2. **Дополнительный процесс**:
   - 6.0 Синхронизация с IoT - отдельный процесс для работы с устройствами

3. **Дополнительные внешние сущности**:
   - Email Service - для отправки уведомлений и приглашений

4. **Больше межпроцессных связей**:
   - Связь между 5.0 и 4.0 (выполнение сценария)
   - Связь между 4.0 и 6.0 (IoT-синхронизация)

### ❌ Другая модель не включает:

1. Отдельный процесс для синхронизации с IoT
2. Email Service для уведомлений
3. Нормализованные хранилища данных
4. Поддержку участников дома (User_Homes)

---

## Преимущества нашей модели

1. ✅ **Лучшая нормализация** - разделение справочников и операционных данных
2. ✅ **Масштабируемость** - отдельный процесс IoT для роста
3. ✅ **Полная функциональность MVP** - поддержка всех требований
4. ✅ **Четкое разделение ответственности** - каждый процесс решает свою задачу

---

*Диаграмма соответствует требованиям MVP приложения Stets Home и использует нотацию Гейна-Сарсона для DFD.*
