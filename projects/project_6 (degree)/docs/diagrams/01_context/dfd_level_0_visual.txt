╔════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                          DFD LEVEL 0 - Stets Home App (Контекстная диаграмма, нотация Гейна-Сарсона)                          ║
╚════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

                                        ┌─────────────────────────────────────┐
                                        │   Stets Home App (мобильное         │
                                        │     приложение для умного дома)      │
                                        └─────────────────────────────────────┘
                                                   ▲                    │
                                                   │                    │
                                                   │                    │
                                                   │                    │
                                                   │                    │
                                                   │                    │
                           Команды управления ─────┼────────────────────┼────► Статус устройств
                           (включить/выключить     │                    │     (включено/выключено/
                           устройство, запустить   │                    │     недоступно)
                           сценарий)               │                    │
                                                   │                    │
                           Данные регистрации ─────┤                    ├────► Список домов и комнат
                           (email, пароль, имя)    │                    │     (структура умного дома)
                                                   │                    │
                           Настройки дома ─────────┤                    ├────► Уведомления
                           (название дома,         │                    │     (статус выполнения
                           комнаты)                │                    │     команд, ошибки)
                                                   │                    │
                           Конфигурация ───────────┤                    ├────► Интерфейс управления
                           сценариев               │                    │     (экраны приложения)
                           (название, расписание,  │                    │
                           действия)               │                    │
                                                   │                    │
                           QR-коды устройств ──────┤                    │     Статус устройств ◄─────┐
                           (для добавления)        │                    │     (текущее состояние,     │
                                                   │                    │     режим энергосбережения) │
                           Коды устройств ─────────┤                    │                            │
                           (12-значные коды)       │                    │     Подтверждения команд ◄──┤
                                                   │                    │     (успешное выполнение)   │
                                                   │                    │                            │
                                                   │                    │     Ошибки связи ◄─────────┤
                                                   │                    │     (устройство недоступно) │
                                                   │                    │                            │
                                                   │                    │ Команды управления          │
                                                   │                    │ (включить/выключить,        │
                                                   │                    │ режим энергосбережения)     │
                                                   │                    │                            │
                                                   │                    │ Запросы статуса             │
                                                   │                    │ (получение текущего         │
                                                   │                    │ состояния)                  │
                                                   ▼                    ▼                            │
                           ┌─────────────────────────────┐      ┌──────────────────────────────┐   │
                           │     Пользователь             │      │  Умные устройства Stets     │   │
                           │  (владелец/член семьи)       │      │  (лампочки, розетки)        │   │
                           └─────────────────────────────┘      └──────────────────────────────┘   │
                                                   ▲                                         ▲       │
                                                   │                                         │       │
                                                   │ Запросы отправки                        │       │
                                                   │ (восстановление пароля,                 │       │
                                                   │ приглашения)                            │       │
                                                   │                                         │       │
                                                   │ Статус доставки                         │       │
                                                   │ (подтверждение отправки                 │       │
                                                   │ писем)                                  │       │
                                                   └─────────────────────────────────────────┘       │
                                                              ┌──────────────────────────────┐      │
                                                              │     Email Service            │      │
                                                              │     (уведомления)            │◄─────┘
                                                              └──────────────────────────────┘

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
                                                    ОПИСАНИЕ ЭЛЕМЕНТОВ
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

ЦЕНТРАЛЬНАЯ СИСТЕМА:
════════════════════

🏡 Stets Home App (мобильное приложение для умного дома)
   - Единый контекст системы, все процессы внутри
   - Управление устройствами, сценариями, домами и комнатами

ВНЕШНИЕ СУЩНОСТИ (3):
═════════════════════

👤 Пользователь (владелец/член семьи)
   - Управляет умным домом через мобильное приложение
   - Регистрируется, настраивает дом, управляет устройствами

🏠 Умные устройства Stets (лампочки, розетки)
   - Физические IoT-устройства с поддержкой энергосбережения
   - Взаимодействуют с системой через сеть

📧 Email Service (уведомления)
   - Внешний сервис для отправки писем
   - Восстановление пароля, приглашения участников

ПОТОКИ ДАННЫХ (16 потоков):
═══════════════════════════

ОТ ПОЛЬЗОВАТЕЛЯ К СИСТЕМЕ (7):
═══════════════════════════════

1. Команды управления
   - Включить/выключить устройство
   - Запустить сценарий
   - Управление режимом энергосбережения

2. Данные регистрации
   - Email адрес
   - Пароль (хэшируется)
   - Имя пользователя

3. Настройки дома
   - Название дома
   - Список комнат
   - Структура помещений

4. Конфигурация сценариев
   - Название сценария
   - Расписание выполнения
   - Действия устройств

5. QR-коды устройств
   - 12-значные коды на упаковке
   - Для автоматического добавления устройств

6. Коды устройств
   - Ручной ввод 12-значных кодов
   - При повреждении QR-кода

ОТ СИСТЕМЫ К ПОЛЬЗОВАТЕЛЮ (4):
════════════════════════════════

1. Статус устройств
   - Включено/выключено/недоступно
   - Текущее состояние устройств

2. Список домов и комнат
   - Структура умного дома
   - Иерархия помещений

3. Уведомления
   - Статус выполнения команд
   - Ошибки и предупреждения

4. Интерфейс управления
   - Экраны приложения
   - Визуальное представление

ОТ УСТРОЙСТВ К СИСТЕМЕ (3):
═════════════════════════════

1. Статус устройств
   - Текущее физическое состояние
   - Режим энергосбережения

2. Подтверждения команд
   - Успешное выполнение команд
   - Статус обработки

3. Ошибки связи
   - Устройство недоступно
   - Проблемы с сетью

ОТ СИСТЕМЫ К УСТРОЙСТВАМ (2):
══════════════════════════════

1. Команды управления
   - Включить/выключить
   - Режим энергосбережения

2. Запросы статуса
   - Получение текущего состояния
   - Периодические обновления

С EMAIL SERVICE (2):
════════════════════

1. Запросы отправки
   - Восстановление пароля
   - Приглашения участников

2. Статус доставки
   - Подтверждение отправки писем
   - Обратная связь от сервиса

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
                                                    КЛЮЧЕВЫЕ ОСОБЕННОСТИ
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

✅ УНИКАЛЬНАЯ ФУНКЦИЯ ЭНЕРГОСБЕРЕЖЕНИЯ
   - Выделена в потоках данных
   - Ключевое конкурентное преимущество Stets

✅ ДВОЙНОЙ СПОСОБ ДОБАВЛЕНИЯ УСТРОЙСТВ
   - QR-код для быстрого добавления
   - Ручной ввод при повреждении QR

✅ СОВМЕСТНЫЙ ДОСТУП
   - Поддержка нескольких пользователей на дом
   - Приглашения через Email Service

✅ АВТОМАТИЗАЦИЯ
   - Сценарии как ключевая функция MVP
   - Расписание выполнения

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
                                                    ГРАНИЦЫ СИСТЕМЫ
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

ЧТО ВХОДИТ В СИСТЕМУ:
   ✅ Аутентификация пользователей
   ✅ Управление домами и комнатами
   ✅ Управление устройствами
   ✅ Выполнение сценариев
   ✅ Автоматизация по расписанию

ЧТО НЕ ВХОДИТ В СИСТЕМУ:
   ❌ Физические IoT-устройства (внешняя сущность)
   ❌ Email сервер (внешний сервис)
   ❌ Операционная система смартфона
   ❌ Протоколы связи с устройствами (детализация на Level 1)

════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════
                                                    СВЯЗЬ С ДОКУМЕНТАЦИЕЙ
════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

Эта диаграмма является начальной точкой моделирования и детализируется на DFD Level 1.
См. `02_processes/dfd_level_1_visual.txt` для детализации процессов.
